<!DOCTYPE html>
<html lang="en"><head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1"><!-- Begin Jekyll SEO tag v2.8.0 -->
<title>How To Securely Access Your User’s Clipboard in iOS 14 | CodeChimp</title>
<meta name="generator" content="Jekyll v3.9.5" />
<meta property="og:title" content="How To Securely Access Your User’s Clipboard in iOS 14" />
<meta name="author" content="Andrew Jackson" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="CodeChimp landing website" />
<meta property="og:description" content="CodeChimp landing website" />
<link rel="canonical" href="http://localhost:4000/how-to-securely-access-your-users-clipboard-in-ios14/" />
<meta property="og:url" content="http://localhost:4000/how-to-securely-access-your-users-clipboard-in-ios14/" />
<meta property="og:site_name" content="CodeChimp" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2021-01-19T14:00:36+00:00" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="How To Securely Access Your User’s Clipboard in iOS 14" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"Andrew Jackson"},"dateModified":"2021-01-19T14:00:36+00:00","datePublished":"2021-01-19T14:00:36+00:00","description":"CodeChimp landing website","headline":"How To Securely Access Your User’s Clipboard in iOS 14","mainEntityOfPage":{"@type":"WebPage","@id":"http://localhost:4000/how-to-securely-access-your-users-clipboard-in-ios14/"},"url":"http://localhost:4000/how-to-securely-access-your-users-clipboard-in-ios14/"}</script>
<!-- End Jekyll SEO tag -->
<link rel="stylesheet" href="/assets/main.css">
  <link rel="shortcut icon" type="image/png" href="favicon.png"><link type="application/atom+xml" rel="alternate" href="http://localhost:4000/feed.xml" title="CodeChimp" /><script src="https://kit.fontawesome.com/ea8bca3c5d.js" crossorigin="anonymous"></script>
</head><body><header class="site-header" role="banner">
    
    <div class="wrapper"><a class="site-title" rel="author" href="/">CodeChimp</a><nav class="site-nav">
            <input type="checkbox" id="nav-trigger" class="nav-trigger" />
            <label for="nav-trigger">
                <span class="menu-icon">
                    <svg viewBox="0 0 18 15" width="18px" height="15px">
                        <path d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.032C17.335,0,18,0.665,18,1.484L18,1.484z M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.032C17.335,6.031,18,6.696,18,7.516L18,7.516z M18,13.516C18,14.335,17.335,15,16.516,15H1.484 C0.665,15,0,14.335,0,13.516l0,0c0-0.82,0.665-1.483,1.484-1.483h15.032C17.335,12.031,18,12.695,18,13.516L18,13.516z"/>
                    </svg>
                </span>
            </label>
            
            <div class="trigger">
                <a class="page-link" href=/blog>Blog</a>
                <a class="page-link" href=/privacy>Privacy Policy</a>
            </div>
        </nav></div>
</header>
<main class="page-content" aria-label="Content">
      <div class="wrapper">
        <article class="post h-entry" itemscope itemtype="http://schema.org/BlogPosting">
    
    <header class="post-header">
        <h1 class="post-title p-name" itemprop="name headline">How To Securely Access Your User’s Clipboard in iOS 14</h1>
        <p class="post-meta">
            <div class="post-dt" style="width:60%; float:left" align-items: center;>
                <i class="fa-solid fa-calendar"></i>
                &nbsp;
                <time class="dt-published" datetime="2021-01-19T14:00:36+00:00" itemprop="datePublished">Jan 19, 2021
                </time></div>
            
            
            <div class="post-categories" style="width:40%; float:right">
                <div class="post-categories-list" style="display: flex; justify-content: flex-end; align-items: center;">
                    <i class="fa-solid fa-tags"></i>
                    &nbsp;
                    
                    
                    <a href="/categories/#swiftui">swiftui</a>
                    &nbsp;
                    
                    <a href="/categories/#iosdev">iosdev</a>
                    
                    
                </div>
            </div>
            
        </p>
        
        
    </header>
    
    <div class="post-content e-content" itemprop="articleBody">
        <p><img src="/assets/2021-01-19-how-to-securely-access-your-users-clipboard-in-ios14/header.jpeg" alt="Header Image" /></p>

<p>With the introduction of iOS 14, Apple has given users new insight into what apps are doing. One key feature involves the often-overlooked pasteboard (or as most know it, the clipboard). Previously, any app could inspect the pasteboard contents whenever they wanted. Usually, this was for automatically extracting links or phone numbers, but it left the gates open for more malicious snooping.</p>

<p>Now, whenever an app inspects the value of the pasteboard, the user is notified by a temporary popup telling them that they have potentially given important information to this app.</p>

<p><img src="/assets/2021-01-19-how-to-securely-access-your-users-clipboard-in-ios14/demo.gif" alt="Demo Image" /></p>

<p>This led to some high-profile apps being called out for what seemed like unreasonable behaviour, forcing them to quickly explain why they were snooping on the pasteboard in the first place. In many cases, they quickly removed pasteboard inspection.</p>

<p>iOS has always had the ability to determine the content type on the pasteboard so you could quickly determine if you wanted to dig further. Checking content type alone won’t trigger the security popup, but it is triggered when digging deeper into the content— particularly string values.</p>

<p>To allow legitimate pasteboard inspection, Apple has provided a new API to help apps determine whether that string is worth digging into and triggering that popup.</p>

<p>This article will explain how to use this feature and also some unexpected limitations. To help you explore whilst learning this new API, I’ve created a very simple SwiftUI application that uses all the options of the API. To set up the sample, create a new SwiftUI application in Xcode, calling it whatever you like, and paste the code below into the <code class="language-plaintext highlighter-rouge">ContentView.swift</code> file:</p>

<script src="https://gist.github.com/40938ba1a9166216e472c92a1a5172a7.js"> </script>

<p>The main body of the code is simple if you are familiar with SwiftUI. It creates a button and a text view. The button will look at the pasteboard, conditionally get the contents, and display them in the text view. The piece we’ll concentrate on is the inspectPasteboard function, breaking it down section by section. If you aren’t using SwiftUI, don’t worry. The pasteboard methods work with UIKit as well, but for this example, getting something on the screen is easier with SwiftUI.</p>

<p>Starting at the top, we have:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>if !UIPasteboard.general.hasStrings { return }
</code></pre></div></div>

<p>This is not new. hasStrings is a very convenient method to determine the type of data in the pasteboard. For our example, we are only interested in textual data, so immediately exit if no strings are present.</p>

<p>The next part is new:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>UIPasteboard.general.detectPatterns(for: [UIPasteboard.DetectionPattern.probableWebURL, UIPasteboard.DetectionPattern.number, UIPasteboard.DetectionPattern.probableWebSearch], completionHandler: {result in ...
</code></pre></div></div>

<p>Now we get into the new bits introduced with iOS 14. <code class="language-plaintext highlighter-rouge">detectPatterns</code> allows us to go beyond basic type checking and have some probability that the string will contain something useful. If we inspect it, we will probably be adding useful functionality to our app.</p>

<p>The <code class="language-plaintext highlighter-rouge">for</code> parameter takes a set of <code class="language-plaintext highlighter-rouge">DetectionPatterns</code>. There are currently three possible patterns you can use. For this example, we will check all three. But in real-world use cases, we’d probably only be checking one of these. We will cover each in turn, explaining what they check and some typical use cases. First, however, we need to talk about how that <code class="language-plaintext highlighter-rouge">completionHandler</code> works.</p>

<p>Within that completion handler, we have:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>switch result {
case .success(let detectedPatterns):
  ...
case .failure(let error):
  ...
}
</code></pre></div></div>

<p>That <code class="language-plaintext highlighter-rouge">.success</code> result does not mean we’ve found a match to our provided patterns. It just means that the pattern detection has completed. The <code class="language-plaintext highlighter-rouge">detectedPatterns</code> value contains a set of matched patterns, so we need to check that. The <code class="language-plaintext highlighter-rouge">.failure</code> result would be set if the <code class="language-plaintext highlighter-rouge">detectPatterns</code> method encountered an issue accessing the pasteboard — something I’ve never seen happen, but you should gracefully accept that you are unable to look at the pasteboard right now.</p>

<p>Finally, we get to the interesting part: those three <code class="language-plaintext highlighter-rouge">if</code> statements checking in turn if the detected patterns contain one we are interested in and we can act upon it. It’s at this point that we know we likely have a value we want to read and call that <code class="language-plaintext highlighter-rouge">UIPasteboard.general.string</code> method that will trigger the user popup.</p>

<p>Apple has not documented the exact criteria of each of these patterns, but I will explain how they work. It is highly likely that Apple will refine these over time and possibly add additional patterns to further prevent apps from accessing the pasteboard unnecessarily.</p>

<hr />

<h1 id="detectionpatternprobableweburl">DetectionPattern.probableWebURL</h1>
<p>This is probably the most frequently used of the patterns. It determines if the string contains a URL we may want to extract and use. It’s important to note that this will be matched if the string has a URL anywhere within it, so you will have to manipulate the string further yourself if you want to extract the actual URL portion.</p>

<p>The obvious use case is for “read it later”-style apps to take a URL from another app and offer to parse or save it.</p>

<p>This is probably the safest pattern. You are most likely to find something you can actually use when you access the pasteboard value. Things get a little vaguer with the remaining patterns.</p>

<h1 id="detectionpatternnumber">DetectionPattern.number</h1>
<p>This pattern seems to match a lot of numeric use cases. As well as a simple whole number, numbers with decimal places, and numbers with currency symbols, it also matches strings that start with a number and formulas (1+2, etc.).</p>

<p>Whilst this broad matching may be useful for spreadsheet-/calculator-style applications, you will get a false positive if you are, for example, creating a sales tax calculator and the user had a numbered list item in the pasteboard. Until you call that popup producing <code class="language-plaintext highlighter-rouge">UIPasteboard.general.string</code>, you won’t know if you can truly handle the value.</p>

<h1 id="detectionpatternprobablewebsearch">DetectionPattern.probableWebSearch</h1>
<p>This is the broadest pattern of them all. It seems to match anything we have in the pasteboard as long as it’s text. I have copied whole paragraphs in and this pattern still matches. It is worth noting that it also produces a positive match for URLs and numbers, so if you are acting on multiple patterns, always handle this last.</p>

<p>I don’t have a particular use case for this one. It’s so broad that I would be hitting the pasteboard value (and thereby showing the popup) regardless.</p>

<hr />

<h2 id="conclusion">Conclusion</h2>
<p>Whilst the new detection patterns won’t stop the popup, they will help your app determine if it’s going to be useful to inspect the pasteboard. Seeing this popup less frequently as a user gives reassurance that your app isn’t overreaching on the data it collects, though it’s probably worth explaining why you are reading the pasteboard when you have to.</p>

<p>I feel this is the first step in the pasteboard pattern sets. Watch out for changes in the future as Apple refines these further, which will be both good for you as an app developer and for user privacy.</p>


    </div><a class="u-url" href="/how-to-securely-access-your-users-clipboard-in-ios14/" hidden></a>
</article>

<script>
  document
    .querySelector('.post-content')
    .querySelectorAll('pre.highlight')
    .forEach(function (pre) {
      var button = document.createElement('button');
      var copyText = 'Copy';
      button.className = 'copy';
      button.type = 'button';
      button.ariaLabel = 'Copy code to clipboard';
      button.innerText = copyText;
      button.addEventListener('click', function () {
        var code = pre.querySelector('code').innerText.trim();
        navigator.clipboard.writeText(code);
        button.innerText = 'Copied';
        setTimeout(function () {
          button.innerText = copyText;
        }, 4000);
      });
      pre.appendChild(button);
    });
</script>

      </div>
    </main><footer class="site-footer h-card">
    <data class="u-url" href="/"></data>
    
    <div class="wrapper">
        
        <div class="social-links"><ul class="social-media-list"><li><a href="https://github.com/andrew-codechimp"><svg class="svg-icon"><use xlink:href="/assets/minima-social-icons.svg#github"></use></svg> <span class="username">andrew-codechimp</span></a></li></ul>
<ul class="social-media-list"><li><a rel="me" href="https://mastodon.online/@codechimp"><svg class="svg-icon"><use xlink:href="/assets/minima-social-icons.svg#mastodon"></use></svg> <span class="username">codechimp</span></a></li></ul>
        </div>
        
        <div class="copyright">
            Copyright © 2025 CodeChimp
        </div>
    </div>
    
</footer>
</body>

</html>
