<!DOCTYPE html>
<html lang="en"><head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1"><!-- Begin Jekyll SEO tag v2.8.0 -->
<title>Restarting your application on upgrade and boot | CodeChimp</title>
<meta name="generator" content="Jekyll v3.9.5" />
<meta property="og:title" content="Restarting your application on upgrade and boot" />
<meta name="author" content="Andrew Jackson" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="I have an application which displays an ongoing notification and although it’s well documented how to start something on boot it’s less well known how to do so when your app is upgraded. So every time my app was upgraded users would have to manually start the app or wait for the next reboot. It’s pretty simple to get code to fire on an upgrade, just use the MY_PACKAGE_REPLACED intent. I usually combine this with the BOOT_COMPLETED to fire the same receiver to set things up properly. It’s also important to set your install location to internalOnly otherwise your external storage may not be mounted and the receiver won’t fire. Here’s the relevant manifest entry and a simple broadcast receiver to do it." />
<meta property="og:description" content="I have an application which displays an ongoing notification and although it’s well documented how to start something on boot it’s less well known how to do so when your app is upgraded. So every time my app was upgraded users would have to manually start the app or wait for the next reboot. It’s pretty simple to get code to fire on an upgrade, just use the MY_PACKAGE_REPLACED intent. I usually combine this with the BOOT_COMPLETED to fire the same receiver to set things up properly. It’s also important to set your install location to internalOnly otherwise your external storage may not be mounted and the receiver won’t fire. Here’s the relevant manifest entry and a simple broadcast receiver to do it." />
<link rel="canonical" href="http://localhost:4000/restarting-your-application-on-upgrade-and-boot/" />
<meta property="og:url" content="http://localhost:4000/restarting-your-application-on-upgrade-and-boot/" />
<meta property="og:site_name" content="CodeChimp" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2015-07-11T14:28:36+01:00" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="Restarting your application on upgrade and boot" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"Andrew Jackson"},"dateModified":"2015-07-11T14:28:36+01:00","datePublished":"2015-07-11T14:28:36+01:00","description":"I have an application which displays an ongoing notification and although it’s well documented how to start something on boot it’s less well known how to do so when your app is upgraded. So every time my app was upgraded users would have to manually start the app or wait for the next reboot. It’s pretty simple to get code to fire on an upgrade, just use the MY_PACKAGE_REPLACED intent. I usually combine this with the BOOT_COMPLETED to fire the same receiver to set things up properly. It’s also important to set your install location to internalOnly otherwise your external storage may not be mounted and the receiver won’t fire. Here’s the relevant manifest entry and a simple broadcast receiver to do it.","headline":"Restarting your application on upgrade and boot","mainEntityOfPage":{"@type":"WebPage","@id":"http://localhost:4000/restarting-your-application-on-upgrade-and-boot/"},"url":"http://localhost:4000/restarting-your-application-on-upgrade-and-boot/"}</script>
<!-- End Jekyll SEO tag -->
<link rel="stylesheet" href="/assets/main.css">
  <link rel="shortcut icon" type="image/png" href="favicon.png"><link type="application/atom+xml" rel="alternate" href="http://localhost:4000/feed.xml" title="CodeChimp" /><script src="https://kit.fontawesome.com/ea8bca3c5d.js" crossorigin="anonymous"></script>
</head><body><header class="site-header" role="banner">
    
    <div class="wrapper"><a class="site-title" rel="author" href="/">CodeChimp</a><nav class="site-nav">
            <input type="checkbox" id="nav-trigger" class="nav-trigger" />
            <label for="nav-trigger">
                <span class="menu-icon">
                    <svg viewBox="0 0 18 15" width="18px" height="15px">
                        <path d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.032C17.335,0,18,0.665,18,1.484L18,1.484z M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.032C17.335,6.031,18,6.696,18,7.516L18,7.516z M18,13.516C18,14.335,17.335,15,16.516,15H1.484 C0.665,15,0,14.335,0,13.516l0,0c0-0.82,0.665-1.483,1.484-1.483h15.032C17.335,12.031,18,12.695,18,13.516L18,13.516z"/>
                    </svg>
                </span>
            </label>
            
            <div class="trigger">
                <a class="page-link" href=/blog>Blog</a>
                <a class="page-link" href=/privacy>Privacy Policy</a>
            </div>
        </nav></div>
</header>
<main class="page-content" aria-label="Content">
      <div class="wrapper">
        <article class="post h-entry" itemscope itemtype="http://schema.org/BlogPosting">
    
    <header class="post-header">
        <h1 class="post-title p-name" itemprop="name headline">Restarting your application on upgrade and boot</h1>
        <p class="post-meta">
            <div class="post-dt" style="width:60%; float:left" align-items: center;>
                <i class="fa-solid fa-calendar"></i>
                &nbsp;
                <time class="dt-published" datetime="2015-07-11T14:28:36+01:00" itemprop="datePublished">Jul 11, 2015
                </time></div>
            
            
            <div class="post-categories" style="width:40%; float:right">
                <div class="post-categories-list" style="display: flex; justify-content: flex-end; align-items: center;">
                    <i class="fa-solid fa-tags"></i>
                    &nbsp;
                    
                    
                    <a href="/categories/#android">android</a>
                    
                    
                </div>
            </div>
            
        </p>
        
        
    </header>
    
    <div class="post-content e-content" itemprop="articleBody">
        <p>I have an application which displays an ongoing notification and although it’s well documented how to start something on boot it’s less well known how to do so when your app is upgraded. So every time my app was upgraded users would have to manually start the app or wait for the next reboot. It’s pretty simple to get code to fire on an upgrade, just use the MY_PACKAGE_REPLACED intent. I usually combine this with the BOOT_COMPLETED to fire the same receiver to set things up properly. It’s also important to set your install location to internalOnly otherwise your external storage may not be mounted and the receiver won’t fire. Here’s the relevant manifest entry and a simple broadcast receiver to do it.</p>

<h3 id="androidmanifestxml">AndroidManifest.xml</h3>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;manifest android:installLocation="internalOnly" ...&gt;

    &lt;uses-permission android:name="android.permission.RECEIVE_BOOT_COMPLETED" /&gt;

    &lt;application ...&gt;
       &lt;receiver android:name=".OnStartReceiver"&gt;
            &lt;intent-filter&gt;
                &lt;action android:name="android.intent.action.BOOT_COMPLETED" /&gt;
                &lt;action android:name="android.intent.action.MY_PACKAGE_REPLACED" /&gt;
            &lt;/intent-filter&gt;
        &lt;/receiver&gt;
    &lt;/application&gt;
&lt;/manifest&gt;
</code></pre></div></div>

<p>If you only want to do something on upgrade then you can drop the RECEIVE_BOOT_COMPLETED permission.</p>

<h3 id="onstartreceiverjava">OnStartReceiver.java</h3>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>package com.example.myapp

import android.content.BroadcastReceiver;
import android.content.Context;
import android.content.Intent;

public class OnStartReceiver extends BroadcastReceiver {

    @Override
    public void onReceive(Context context, Intent intent) {

         //TODO - add your code here to start your notification/whatever
    }
}
</code></pre></div></div>

    </div><a class="u-url" href="/restarting-your-application-on-upgrade-and-boot/" hidden></a>
</article>

<script>
  document
    .querySelector('.post-content')
    .querySelectorAll('pre.highlight')
    .forEach(function (pre) {
      var button = document.createElement('button');
      var copyText = 'Copy';
      button.className = 'copy';
      button.type = 'button';
      button.ariaLabel = 'Copy code to clipboard';
      button.innerText = copyText;
      button.addEventListener('click', function () {
        var code = pre.querySelector('code').innerText.trim();
        navigator.clipboard.writeText(code);
        button.innerText = 'Copied';
        setTimeout(function () {
          button.innerText = copyText;
        }, 4000);
      });
      pre.appendChild(button);
    });
</script>

      </div>
    </main><footer class="site-footer h-card">
    <data class="u-url" href="/"></data>
    
    <div class="wrapper">
        
        <div class="social-links"><ul class="social-media-list"><li><a href="https://github.com/andrew-codechimp"><svg class="svg-icon"><use xlink:href="/assets/minima-social-icons.svg#github"></use></svg> <span class="username">andrew-codechimp</span></a></li></ul>
<ul class="social-media-list"><li><a rel="me" href="https://mastodon.online/@codechimp"><svg class="svg-icon"><use xlink:href="/assets/minima-social-icons.svg#mastodon"></use></svg> <span class="username">codechimp</span></a></li></ul>
        </div>
        
        <div class="copyright">
            Copyright © 2025 CodeChimp
        </div>
    </div>
    
</footer>
</body>

</html>
